{"componentChunkName":"component---src-templates-blog-post-js","path":"/progressive-web-app/","result":{"data":{"site":{"siteMetadata":{"title":"احسان گازار"}},"markdownRemark":{"id":"f0f21fd0-bb0d-5427-a282-dc09066c447a","excerpt":"…","html":"<p> برخوردار شده است. یکی از مهم‌ترین مسائلی هم که با آن روبرو شده ایم شاید تولید یک برنامه‌ با بهترین تجربه‌ی کاربری باشد.</p>\n<p>یکی از اسم‌هایی که امروزه می‌شنویم Progressive Web App یا PWA است. شاید بدانید که مثلا VS Code یا Slack یا حتی طی خبری تازه Microsoft 360 به همین طریق نوشته شده و در اصل یک PWA هستند.</p>\n<p>می‌توانید دموی اپلیکیشنی که آماده کرده‌ام را در آدرس زیر ببینید:</p>\n<p><a href=\"https://mazda-pwa-qmtrcvydqz.now.sh\">https://mazda-pwa-qmtrcvydqz.now.sh</a></p>\n<p>همچنین برای دیدن کد اپلیکیشن:</p>\n<p><a href=\"https://github.com/ehsangazar/mazda-pwa\">https://github.com/ehsangazar/mazda-pwa</a></p>\n<h1>تعریف برنامه‌ی تحت وب پیش‌رو چیست؟</h1>\n<p>این ترجمه‌ای است که ویکی‌پدیا ارائه می‌کند:</p>\n<p>برنامه‌ی تحت وب پیش‌رو یک نمونه وب‌سایت تحت وب است که تجربه‌ی کاربری‌ای همانند برنامه‌های گوشی/دسکتاپ (native) ارائه می کند. این برنامه‌ها از آخرین امکانات مرورگر‌ها استفاده می‌کنند تا بهترین تجربه را به همراه بیاورند.</p>\n<h1>PWA ها می‌بایست چه ویژگی‌هایی داشته باشند؟</h1>\n<ul>\n<li>Cross Browser Accessibility\nیعنی می‌بایست مطمئن شد که در تمامی مرورگرهای معروف و پراستفاده کار‌میکنند و ساپورت خوبی از مرورگرها در موبایل‌ها و تبلت داشته باشد.</li>\n<li>واکنش‌گرا یا Responsive:\nخب این دیگر جدید نیست و مطمئنا خیلی از شما با این آشنا هستید و به راحتی امروزه با استفاده از CSS FLEXBox یا CSS GRID و غیره می‌توان به این دست یافت.</li>\n<li>عدم وابستگی به اینترنت\nبا استفاده از Service Worker ها، می‌تواند صرف نظر از اینترنت کار کند، که این مورد را در این پست بیشتر توضیح خواهم داد چون نیاز‌مند برنامه‌نویسی است.</li>\n<li>تجربه‌ی اپلیکیشن مانند:\nیعنی می‌تواند به سرعت از صفحه‌ای به صفحه‌ی دیگر برود و تفاوت چشم‌گیری با یک اپلیکیشن در گوشی نداشته باشد، خب مهم‌ترین مسئله در این قسمت بحث Push کردن Route جدید در History است جای Replace کردن آن که برای آن هم در ادامه‌ی این پست توضیحی خواهم آورد.</li>\n<li>به‌روز‌رسانی:\nبه صورت خودکار آپدیت می شود، این هم موردی است که می‌توان با Service Workerها و Background Sync به آن دست یافت یا می‌توان از سیستم‌های ساده‌تری مثل Polling استفاده کرد.\nمنظور از این قسمت آن است که کاربر نیازی به Refresh صفحه برای گرفتن اطلاعات جدید نداشته باشد، و خود App سیستمی داشته باشد تا اطلاعات را هر از چندگاه یا به صورت Real Time آپدیت کند.</li>\n<li>امنیت:\nاز Https استفاده کند و امن باشد. خب Security مسئله است که تنها به PWA ها ختم نمی‌شود ولی لازم است که حتما در آن‌ها رعایت شود.</li>\n<li>قابلیت پیدا شدن:\nبرای موتورهای جستجو طراحی شده باشد. خب این چندین مورد را شامل می‌شود که از جمله‌ی آن به داشتن Schema برای Search Engine ها می‌توان اشاره کرد و به صورت حرفه‌ای تر داشتن Server Side Rendering، این مورد را می‌توانید به صورت حرفه‌ای در طول دوره <a href=\"https://designwich.com/courses/react-advanced/\">React Advanced</a> مشاهده ‌کنید.</li>\n<li>قابلیت آگاهی رسانی به کاربر را نیز داشته باشد:\nمنظور از این مورد آن است که تنها وابسته به حضور کاربر در تب مرورگر نباشد و در موقع نیاز بتواند کاربر را متوجه تغییرات یا اخبار مهم کند که خب برای این مورد می‌توان از Push Notification استفاده کرد. که این هم موردی است که در ادامه‌ی این مطلب توضیح داده است.</li>\n<li>قابلیت اشتراک‌گذاری دارد:\nخب این مورد واضحی است و منظور به آن است که برای صفحات اجتماعی نیز بهینه شده باشد و در صورت نیاز لینک اشتراک گذاری برای صفحات اجتماعی نیز در آن تهیه شده باشد.</li>\n</ul>\n<h1>کار کردن با Service Worker برای آفلاین کردن وب‌سایت</h1>\n<p>در اصل Service Worker ها نقش میانی بین سایت و سرور بازی می‌کند و با کنترل کردن request ها قبل از ارسال می‌توانید در صورت نیاز آن‌ها را از Cache بخوانید یا واقعا از سرور اطلاعات را بگیرید.</p>\n<ul>\n<li>برای Register کردن:\nابتدا می‌بایست مطمئن شوید که serviceWorker در navigator موجود باشد که به معنی پشتیبانی مرورگر است.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Check for browser support of service worker</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'serviceWorker'</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\nnavigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'service-worker.js'</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">registration</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// Successful registration</span>\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'successful, scope is:'</span><span class=\"token punctuation\">,</span> registration<span class=\"token punctuation\">.</span>scope<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// Failed</span>\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Whoops, error:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>نحوه‌ی Install کردن و Active کردن:\nدر ابتدا می‌توانید مشخص کنید جه آدرس‌هایی را لازم دارید که در Cache قرار بگیرد. Cache API ها نیز سرویسی است که مرورگر در اختیارتان قرار داده است تا بتوانید Request ها را ذخیره کنید.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> <span class=\"token constant\">CACHE_NAME</span> <span class=\"token operator\">=</span> <span class=\"token string\">'my-pwa-cache-v1'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> urlsToCache <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/styles/styles.css'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/script/webpack-bundle.js'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\nself<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'install'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span>\n    caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cache</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Open a cache and cache our files</span>\n        <span class=\"token keyword\">return</span> cache<span class=\"token punctuation\">.</span><span class=\"token function\">addAll</span><span class=\"token punctuation\">(</span>urlsToCache<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>توجه کنید که در سیستم بالا، webpack-bundle نیز که در اصل bundle ایجاد شده توسط webpack است نیز Cache شده است.</p>\n<ul>\n<li>فراخوانی و کار کردن آفلاین\nدر نهایت با گذاشتن addEventListener روی رویداد fetch می‌توانید تمامی request ها را کنترل کنید و در صورت موجود بودن در Cache تنها آن را از خود مرورگر کاربر برگردانید.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">self<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetch'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span>\n        caches<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> response <span class=\"token operator\">||</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>توجه کنید که service-worker.js بخشی از جاوااسکریپت صفحه نمی‌باشد، در نتیجه دسترسی به DOM ندارد و در صورتی که میخواهید صفحه را آپدیت کنید لازم است جاوا اسکریپت جدایی آن را انجام دهد.</p>\n<h1>کار کردن با Background Sync برای آپدیت کردن اطلاعات وقتی کاربر مشغول کار دیگری است</h1>\n<p>هر چند باید دقت کنید که Service Worker های خود را آپدیت کنید، وگرنه همچنان همیشه سایت به صورت قدیمی لود خواهد شد.</p>\n<p>در این قسمت قصد دارم در مورد Background Sync که یکی از API های Service Worker است صحبت کنم که در صورتی که کاربر تب مرورگر خود را نبسته باشد و اینترنتش قطع شده باشد می‌توانید از آن برای تشخیص آنلاین شدن استفاده کنید و در صورت لزوم کاری کنید.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">navigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span>ready<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">swRegistration</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> swRegistration<span class=\"token punctuation\">.</span>sync<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'myFirstSync'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>اگر این قسمت کد را در service-worker.js خود قرار دهید می‌تواانید در صورت آنلاین شدن تابع myFirstSync را Register کنید و مثلا Notification ای بفرستید.</p>\n<p>توجه داشته باشید Background Sync، در صورت بسته بودن تب مرورگر کار نمی‌کند و Browser ها اکثرا پس از مدتی جلوی فعالیت‌ Service Worker ها را میگیرند.</p>\n<p>اما اگر Desktop Application می‌نویسید یا Progressive Web Application ای که کاربر مداوم به سایت شما رجوع می‌کند این ویژگی Experimental یا آزمایشی به کارتان می‌آید.</p>\n<h1>چگونه تشخصی دهیم کاربر آفلاین است؟ یا اینترنت کاربر قطع شده است؟</h1>\n<p>فرض کنید از لپ تاپ استفاده می‌کنید و اتصال شما به اینترنت برای لحظه‌ای قطع می‌شود در حالیکه لازم است اطلاعات را به صورت Real Time نمایش دهید. در این صورت لازم است که پیغامی به کاربر نشان دهید و در صورت تغییر وضعیت سایت را آپدیت کنید</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'online'</span><span class=\"token punctuation\">,</span>  updateOnlineStatus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'offline'</span><span class=\"token punctuation\">,</span> updateOnlineStatus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">updateOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> condition <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span>onLine <span class=\"token operator\">?</span> <span class=\"token string\">\"online\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"offline\"</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> condition<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>با استفاده از این Event می‌توانید به راحتی تشخصی دهید که کاربر online یا offline است و در صورت نیاز تغییری در صفحه دهید یا اطلاعات قدیمی‌تر را به کاربر نمایش دهید.</p>\n<h1>ارسال Notification به کاربر‌ها</h1>\n<p>در این قسمت لازم که شما با استفاده‌ از کد‌های ساده‌ای به API های مرورگر متصل شوید و در صورت نیاز Notification ها را نمایش دهید.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Notification\"</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This browser does not support desktop notification\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Let's check whether notification permissions have alredy been granted</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">\"granted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Otherwise, we need to ask the user for permission</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> <span class=\"token string\">'denied'</span> <span class=\"token operator\">||</span> Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">permission</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// If the user accepts, let's create a notification</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">\"granted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>کد بالا خیلی راحت به شما کمک می‌کند که مرورگر را برای نمایش Notification ها آماده کنید و سپس با کد زیر می‌توانید در صورت نیاز یک Notification را فعال و ایونت مربوطه را صدا کنید.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">self<span class=\"token punctuation\">.</span>registration<span class=\"token punctuation\">.</span><span class=\"token function\">showNotification</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sync event fired!\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1>ایجاد Manifest برای دسترسی کاربران به سایت</h1>\n<p>این فایل ساده این امکان را به کاربر می‌دهد تا اپلیکیشن را در دستگاه خود نصب کند.\nکافی است فایلی با نام manifest.json در فولدر پابلیک خود قرار دهید و این کد را در آن قرار داده و ویرایش کنید.\n‍</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"short_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MazdaPWA\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Mazda Progressive Web Application\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"icons\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/logo.png\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"192x192\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/logo.png\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"512x512\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"start_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"background_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#990000\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"display\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"standalone\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"scope\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"theme_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#990000\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>و سپس این را در HTML خود قرار دهید</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>link href<span class=\"token operator\">=</span><span class=\"token string\">\"/manifest.json\"</span> rel<span class=\"token operator\">=</span><span class=\"token string\">\"manifest\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<h1>بهینه سازی برای صفحات اجتماعی</h1>\n<p>اگر می‌خواهید پس از Share کردن وب‌سایت یا لینکی از سایت شما در صفحات اجتماعی اطلاعات به درستی در آن‌ها نمایش داده شوند می‌توانید از OpenGraph استفاده کنید که برای مثال به روش زیر است</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span><span class=\"token comment\">/* Twitter OpenGraph */</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"twitter:card\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"summary\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"twitter:site\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"@ehsangazar\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"twitter:creator\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"@ehsangazar\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n<span class=\"token punctuation\">{</span><span class=\"token comment\">/* SocialMedia OpenGraph */</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:url\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"https://fa.ehsangazar.com/\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:type\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"website\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:title\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"Open Graph: Sample Web Page of Mazda PWA\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:description\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"Open Graph: Best Progressive Web App\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>meta property<span class=\"token operator\">=</span><span class=\"token string\">\"og:image\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"https://fa.ehsangazar.com/logo.png\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>این کد را ویرایش کنید و در HTML سایت خود قرار دهید</p>\n<h1>برنامه‌نویسی Notification و کنترل از سرویس‌های دیگر</h1>\n<p>خب مرورگرها امکانی را فراهم می‌کنند که شما سایت خود را در سرویس‌هایی ثبت کنید و از طریق آن‌ها Notification به کاربران بفرستید.</p>\n<p>برای مثال اگر در سایت OneSignal ثبت کنید و کلید API را دریافت کنید با کد زیر می‌توانید سایت را در مرورگر کاربر ثبت کنید.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> applicationServerPublicKey <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">NEW</span> <span class=\"token constant\">KEY</span><span class=\"token operator\">></span>\n<span class=\"token keyword\">const</span> applicationServerKey <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_urlBase64ToUint8Array</span><span class=\"token punctuation\">(</span>applicationServerPublicKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ServiceWorker::: Push Notification for the event'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"serviceWorker\"</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_askForPermision</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        navigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span>ready<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">swRegistration</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        swRegistration<span class=\"token punctuation\">.</span>pushManager<span class=\"token punctuation\">.</span><span class=\"token function\">getSubscription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">subscription</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> isSubscribed <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>subscription <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isSubscribed<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User IS subscribed.'</span><span class=\"token punctuation\">,</span> subscription<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                swRegistration<span class=\"token punctuation\">.</span>pushManager<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                userVisibleOnly<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                applicationServerKey<span class=\"token operator\">:</span> applicationServerKey\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>و وقتی بخواهید Notification ای برای کاربر بفرستید از پنل سایت OneSignal استفاده می‌کنید و با کد زیر در صورت دریافت آن به روشی در سایت تغیری اعمال میکنید یا Notfication ای در سیستم عامل کاربر نمایش می‌دهید</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">self<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'push'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> title <span class=\"token operator\">=</span> <span class=\"token string\">'Push Notification Add event listener'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    body<span class=\"token operator\">:</span> <span class=\"token string\">'Yay it works.'</span><span class=\"token punctuation\">,</span>\n    icon<span class=\"token operator\">:</span> <span class=\"token string\">'static/logo.png'</span><span class=\"token punctuation\">,</span>\n    badge<span class=\"token operator\">:</span> <span class=\"token string\">'static/logo.png'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>registration<span class=\"token punctuation\">.</span><span class=\"token function\">showNotification</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>مطمئنا پیچیدگی‌های زیادی نسبت به پروژه‌ی شما ممکن است در هر کدام از این بخش‌ها پیش بیاید که خوشحال می‌شوم راجب آن‌ها بشنوم.</p>\n<p>اما این لیست کاملی است که در صورت رعایت کردن آن‌ می‌توانید مطمئن شوید بهترین تجربه‌ی کاربری را از نظر برنامه‌نویسی برای بازدیدکنندگان App یا ساییتان در اختیارشان قرار می‌دهید.</p>\n<p>شرکت‌ها بر حسب نیاز ممکن است تمام این موارد را داشته باشند یا هر روز در تلاش برای پیاده‌سازی بهتر و بهینه تر آن‌ها باشند. پس دانش شما در این زمینه‌ها می‌تواند نقش کلیدی ای در شرکت و محصول شما داشته باشد.</p>","fields":{"slug":"/progressive-web-app/"},"frontmatter":{"title":"Progressive Web App یا PWA چیست؟ و چگونه آن را برنامه‌نویسی کنیم","date":"August 02, 2020","description":"Progressive Web App یا PWA چیست؟ و چگونه آن را برنامه‌نویسی کنیم","videoSourceURL":null,"category":"FrontEnd","videoTitle":null,"cover":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACb0lEQVQoz5WS60vTYRTHf82ki/UigvoDelcRroiyiC4QVpgX8gJCFoJSod2NsigQMsSQjNbEVFLQTRxzMPM2Rl6GqeiLzAspLMbGLk2zHMxNt3367RHFFwV14HnO85xzng/fh3OkwFKYgkwNl3YUk7X9LmkxNyk6XM4P50+iVpb3kkLlPSKBiLhHIiv+byYtyduta/UkSme4EHuK5K0ZnJdyKD5SLgqeF6nJVxZCSIatA0b9+rUak6KHylcdHJf2cEKxm5Mbj5K2LYc0KQ/jC5MoDPiXZViEUCgkVjgc/uN5DVj9ro8EaR+HFDuJj1GSGJcpA6/y+mIN/2sCeD+/mmPSAQ7GxrN/y1mUilRu732CqlCN8YORzs4ujEYjZrOZ5uZmLBYLarUarVYr5zrR6/W0t7fj8XiQOibtpCgfkbwhnYy4XK7Iyi5L2dRn1zH1eRLVWxVNjU3iURSm0Wjo7+/HYDBQW1uLTqdDpVJRUVGB3W5HKqjp40aSmge7nqLe/JhPqfXMG78yOfIFfaueKllJd3c3NpuN4eFhxsbGhMKBgQGhuqSkhNLSUtra2pidnUW6U2nhYZaWmtN1eGXQqi0GA4yOjPKxpweTyYTVasXpdApgb2+vALjdboaGhkRucHCQ6elppDrDFCbdBMu/gnhDS7RWmZmzfhfQmZkZuWHV4nGPDG5sbKShoYGWlhbx9aiPqhwfHxc14suR8MoMzYeWuX6uTG5OEm8K3ouYy+HGbrPjW/AJuNfrxeFw4Pf7CQaDuFwufD6fiEUbstblidFv5CY8I0WRQ/qmXLrqekRywePDP7dIKBj6p5GJzuFveni/dq5a0JYAAAAASUVORK5CYII=","aspectRatio":1.7699115044247788,"src":"/static/a82e644cf3f3fb52932fcf4a05977e84/ee604/cover.png","srcSet":"/static/a82e644cf3f3fb52932fcf4a05977e84/69585/cover.png 200w,\n/static/a82e644cf3f3fb52932fcf4a05977e84/497c6/cover.png 400w,\n/static/a82e644cf3f3fb52932fcf4a05977e84/ee604/cover.png 800w,\n/static/a82e644cf3f3fb52932fcf4a05977e84/f3583/cover.png 1200w,\n/static/a82e644cf3f3fb52932fcf4a05977e84/5707d/cover.png 1600w,\n/static/a82e644cf3f3fb52932fcf4a05977e84/eeb1b/cover.png 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{"slug":"/progressive-web-app/","previous":{"fields":{"slug":"/react-advanced-course/"},"frontmatter":{"title":"دوره آنلاین React JS پیشرفته"}},"next":{"fields":{"slug":"/rail-response-time-design/"},"frontmatter":{"title":"مدل اندازه‌گیری و طراحی واکنش‌های وب‌سایت RAIL"}}}},"staticQueryHashes":["2841359383"]}