{"version":3,"sources":["webpack:///./src/pages/profile.js"],"names":["Profile","location","app","useContext","MyApp","useState","isLoadingProfile","setIsLoadingRegisterForm","responseOfProfileAPI","setResponseOfApiProfile","first_name","user","userData","last_name","formProfileValues","setFormRegisterValues","handleChangeRegisterForm","name","event","preventDefault","target","value","handleSubmitRegister","a","fetchHandler","method","url","body","auth","result","data","success","type","message","updateUser","console","error","useEffect","title","page","id","className","to","src","image","alt","onSubmit","variant","Group","controlId","Label","Control","onChange","placeholder","disabled","email"],"mappings":"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","file":"component---src-pages-profile-js-fc46ce4206372eb9a2a0.js","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\nimport { Link } from 'gatsby'\nimport Layout from '../components/Layout/Layout'\nimport SEO from '../components/SEO/SEO'\nimport MyApp from '../contexts/MyApp'\nimport { Alert, Form, Button } from 'react-bootstrap'\nimport fetchHandler from '../utils/fetchHandler'\n\nconst Profile = ({ location }) => {\n  const app = useContext(MyApp)\n  const [isLoadingProfile, setIsLoadingRegisterForm] = useState(false)\n  const [responseOfProfileAPI, setResponseOfApiProfile] = useState(null)\n  const [formProfileValues, setFormRegisterValues] = useState({\n    first_name: app.user.userData.first_name,\n    last_name: app.user.userData.last_name,\n  })\n\n  const handleChangeRegisterForm = (name, event) => {\n    if (event) event.preventDefault()\n    setFormRegisterValues({\n      ...formProfileValues,\n      [name]: event.target.value,\n    })\n  }\n\n  const handleSubmitRegister = async (event) => {\n    if (event) event.preventDefault()\n    setIsLoadingRegisterForm(true)\n\n    try {\n      const result = await fetchHandler({\n        method: 'POST',\n        url: '/api/v1/user/profileUpdate',\n        body: {\n          first_name: formProfileValues.first_name,\n          last_name: formProfileValues.last_name,\n        },\n        auth: true,\n      })\n      if (result.data.success) {\n        setResponseOfApiProfile({\n          type: 'success',\n          message: 'پروفایل شما با موفقیت آپدیت شد',\n        })\n        app.user.updateUser()\n      } else {\n        setResponseOfApiProfile({\n          type: 'danger',\n          message: result.data.message,\n        })\n      }\n    } catch (e) {\n      console.error(e)\n    }\n    setIsLoadingRegisterForm(false)\n  }\n\n  useEffect(() => {\n    setFormRegisterValues({\n      first_name: app.user.userData.first_name,\n      last_name: app.user.userData.last_name,\n    })\n  }, [app.user.userData.first_name, app.user.userData.last_name])\n\n  return (\n    <Layout location={location} title={'پروفایل'} page=\"about\">\n      <SEO title={'پروفایل'} />\n      {!app.user.userData.id && (\n        <div className=\"alert alert-info widthAll\">\n          شما به این بخش دسترسی ندارید، لطفا وارد شوید\n        </div>\n      )}\n      {app.user.userData.id && (\n        <div className=\"no-pd\" id=\"content\">\n          <div className=\"container\">\n            <div className=\"breadcrumb\">\n              <ul>\n                <li>\n                  <Link to={'/'}>\n                    <i className=\"fas fa-home\"></i>خانه\n                  </Link>\n                </li>\n                <li className=\"active\">پروفایل</li>\n              </ul>\n            </div>\n            <div className=\"about-us\">\n              <div className=\"row content-container\">\n                <>\n                  <div className=\"col-12 col-md-4 col-lg-3 profle-image\">\n                    <img src={app.user.userData.image} alt=\"profile\" />\n                  </div>\n                  <div className=\"col-12 col-md-8 col-lg-9 profle\">\n                    <h1>\n                      پروفایل\n                      {` `}\n                      {app.user.userData.first_name}\n                      {` `}\n                      {app.user.userData.last_name}\n                    </h1>\n                    <Form\n                      onSubmit={!isLoadingProfile ? handleSubmitRegister : null}\n                    >\n                      <div className=\"profile-body\">\n                        <div className=\"profile-body-form\">\n                          {responseOfProfileAPI && (\n                            <Alert variant={responseOfProfileAPI.type}>\n                              {responseOfProfileAPI.message}\n                            </Alert>\n                          )}\n                          <Form.Group controlId=\"formBasicText\">\n                            <Form.Label>نام</Form.Label>\n                            <Form.Control\n                              onChange={(event) =>\n                                handleChangeRegisterForm('first_name', event)\n                              }\n                              type=\"text\"\n                              value={formProfileValues.first_name}\n                              placeholder=\"نام خود را وارد نمایید\"\n                            />\n                          </Form.Group>\n                          <Form.Group controlId=\"formBasicText\">\n                            <Form.Label>نام خانوادگی</Form.Label>\n                            <Form.Control\n                              onChange={(event) =>\n                                handleChangeRegisterForm('last_name', event)\n                              }\n                              type=\"text\"\n                              value={formProfileValues.last_name}\n                              placeholder=\"نام خانوادگی خود را وارد نمایید\"\n                            />\n                          </Form.Group>\n                          <Form.Group controlId=\"formBasicEmail\">\n                            <Form.Label>ایمیل</Form.Label>\n                            <Form.Control\n                              disabled\n                              type=\"email\"\n                              value={app.user.userData.email}\n                              placeholder=\"ایمیل خود را وارد نمایید\"\n                            />\n                          </Form.Group>\n                          <Button\n                            variant=\"primary\"\n                            type=\"submit\"\n                            disabled={isLoadingProfile}\n                          >\n                            ویرایش پروفایل\n                          </Button>\n                        </div>\n                      </div>\n                    </Form>\n                  </div>\n                </>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </Layout>\n  )\n}\n\nexport default Profile\n"],"sourceRoot":""}